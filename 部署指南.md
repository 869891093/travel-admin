# ç½‘é¡µç®¡ç†ç³»ç»Ÿéƒ¨ç½²æŒ‡å—

## ğŸ“¦ éƒ¨ç½²åŒ…å·²åˆ›å»º

éƒ¨ç½²åŒ…æ–‡ä»¶ï¼š`admin-deploy-20250807-131611.tar.gz` (950KB)

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### 1. ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
```bash
# ä½¿ç”¨scpä¸Šä¼ ï¼ˆæ›¿æ¢your-serverä¸ºæ‚¨çš„æœåŠ¡å™¨ä¿¡æ¯ï¼‰
scp admin-deploy-20250807-131611.tar.gz user@your-server:/path/to/deploy/

# æˆ–ä½¿ç”¨å…¶ä»–æ–‡ä»¶ä¼ è¾“å·¥å…·ä¸Šä¼ 
```

### 2. åœ¨æœåŠ¡å™¨ä¸Šè§£å‹å’Œå®‰è£…
```bash
# è§£å‹æ–‡ä»¶
tar -xzf admin-deploy-20250807-131611.tar.gz

# è¿›å…¥ç›®å½•
cd admin-deploy-20250807-131611

# å®‰è£…ä¾èµ–
npm install
```

### 3. å¯åŠ¨æœåŠ¡

#### æ–¹å¼1ï¼šç›´æ¥å¯åŠ¨ï¼ˆå¼€å‘æµ‹è¯•ï¼‰
```bash
node server.js
```

#### æ–¹å¼2ï¼šä½¿ç”¨PM2ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨æœåŠ¡
pm2 start ecosystem.config.js

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

#### æ–¹å¼3ï¼šä½¿ç”¨Docker
```bash
# æ„å»ºå¹¶å¯åŠ¨å®¹å™¨
docker-compose up -d
```

### 4. é…ç½®åŸŸåï¼ˆå¯é€‰ï¼‰

#### Nginxé…ç½®ç¤ºä¾‹
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

#### SSLè¯ä¹¦é…ç½®
```bash
# ä½¿ç”¨Let's Encryptè·å–SSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com
```

## ğŸŒ è®¿é—®åœ°å€

- **ä¸»é¡µé¢**ï¼šhttp://your-server-ip:3000
- **äº§å“ç¼–è¾‘æµ‹è¯•**ï¼šhttp://your-server-ip:3000/test-product-edit.html
- **è¡Œç¨‹å®‰æ’æµ‹è¯•**ï¼šhttp://your-server-ip:3000/test-itinerary.html

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### äº§å“ç®¡ç†
- âœ… äº§å“å¢åˆ æ”¹æŸ¥
- âœ… å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼ˆæ”¯æŒå¤šå›¾ï¼‰
- âœ… ä»·æ ¼æ—¥å†ç®¡ç†ï¼ˆå¯è§†åŒ–ç¼–è¾‘ï¼‰
- âœ… è¡Œç¨‹å®‰æ’ç®¡ç†
- âœ… è´¹ç”¨è¯´æ˜ç®¡ç†
- âœ… é¢„è®¢é¡»çŸ¥ç®¡ç†
- âœ… æ ‡ç­¾ç®¡ç†
- âœ… å“åº”å¼è®¾è®¡

### æ•°æ®ç®¡ç†
- âœ… åŒºåŸŸç®¡ç†
- âœ… è½®æ’­å›¾ç®¡ç†
- âœ… è®¢å•ç®¡ç†
- âœ… ç»Ÿè®¡ä»ªè¡¨ç›˜

### æŠ€æœ¯ç‰¹æ€§
- âœ… ä¸å°ç¨‹åºæ•°æ®å®Œå…¨åŒæ­¥
- âœ… æ”¯æŒæœ¬åœ°å­˜å‚¨å’Œäº‘ç«¯å­˜å‚¨
- âœ… å®æ—¶æ•°æ®éªŒè¯
- âœ… ç§»åŠ¨ç«¯é€‚é…
- âœ… é”™è¯¯å¤„ç†å’Œå®¹é”™æœºåˆ¶

## ğŸ”§ æœåŠ¡å™¨è¦æ±‚

### æœ€ä½é…ç½®
- **æ“ä½œç³»ç»Ÿ**ï¼šLinux/Ubuntu 18.04+
- **Node.js**ï¼šç‰ˆæœ¬ 14.0+
- **å†…å­˜**ï¼š512MB+
- **å­˜å‚¨**ï¼š1GB+
- **ç½‘ç»œ**ï¼šå…¬ç½‘IPæˆ–åŸŸå

### æ¨èé…ç½®
- **æ“ä½œç³»ç»Ÿ**ï¼šUbuntu 20.04 LTS
- **Node.js**ï¼šç‰ˆæœ¬ 16.0+
- **å†…å­˜**ï¼š2GB+
- **å­˜å‚¨**ï¼š10GB+
- **ç½‘ç»œ**ï¼šç‹¬ç«‹åŸŸå + SSLè¯ä¹¦

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### æœåŠ¡å™¨å‡†å¤‡
- [ ] å®‰è£…Node.js (>= 14)
- [ ] å®‰è£…npm
- [ ] é…ç½®é˜²ç«å¢™ï¼ˆå¼€æ”¾3000ç«¯å£ï¼‰
- [ ] é…ç½®åŸŸåè§£æï¼ˆå¯é€‰ï¼‰

### æ–‡ä»¶éƒ¨ç½²
- [ ] ä¸Šä¼ éƒ¨ç½²åŒ…åˆ°æœåŠ¡å™¨
- [ ] è§£å‹æ–‡ä»¶
- [ ] å®‰è£…ä¾èµ–
- [ ] é…ç½®ç¯å¢ƒå˜é‡

### æœåŠ¡å¯åŠ¨
- [ ] æµ‹è¯•æœåŠ¡å¯åŠ¨
- [ ] é…ç½®PM2ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] è®¾ç½®å¼€æœºè‡ªå¯
- [ ] é…ç½®æ—¥å¿—è½®è½¬

### åŸŸåé…ç½®
- [ ] é…ç½®Nginxåå‘ä»£ç†
- [ ] ç”³è¯·SSLè¯ä¹¦
- [ ] é…ç½®HTTPS
- [ ] æµ‹è¯•è®¿é—®

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£è¢«å ç”¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

#### 2. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version

# æ£€æŸ¥ä¾èµ–å®‰è£…
npm list

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
pm2 logs admin-server
```

#### 3. æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 status

# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status

# æ£€æŸ¥Nginxé…ç½®
sudo nginx -t
```

#### 4. æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping api.weixin.qq.com

# æ£€æŸ¥APIå¯†é’¥é…ç½®
cat js/config.js
```

### æ—¥å¿—æŸ¥çœ‹
```bash
# PM2æ—¥å¿—
pm2 logs admin-server

# ç³»ç»Ÿæ—¥å¿—
journalctl -u admin-server

# Nginxæ—¥å¿—
sudo tail -f /var/log/nginx/access.log
```

## ğŸ”’ å®‰å…¨é…ç½®

### 1. é˜²ç«å¢™é…ç½®
```bash
# åªå¼€æ”¾å¿…è¦ç«¯å£
sudo ufw allow 22    # SSH
sudo ufw allow 80    # HTTP
sudo ufw allow 443   # HTTPS
sudo ufw enable
```

### 2. ç”¨æˆ·æƒé™
```bash
# åˆ›å»ºä¸“ç”¨ç”¨æˆ·
sudo adduser admin-user
sudo usermod -aG sudo admin-user

# è®¾ç½®æ–‡ä»¶æƒé™
sudo chown -R admin-user:admin-user /path/to/admin
```

### 3. SSLè¯ä¹¦
```bash
# ä½¿ç”¨Let's Encrypt
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. è¿›ç¨‹ç›‘æ§
```bash
# æŸ¥çœ‹PM2çŠ¶æ€
pm2 status

# æŸ¥çœ‹èµ„æºä½¿ç”¨
pm2 monit
```

### 2. æ—¥å¿—ç®¡ç†
```bash
# é…ç½®æ—¥å¿—è½®è½¬
sudo nano /etc/logrotate.d/admin-server

# æ—¥å¿—è½®è½¬é…ç½®
/path/to/admin/logs/*.log {
    daily
    missingok
    rotate 7
    compress
    delaycompress
    notifempty
    create 644 admin-user admin-user
}
```

### 3. å¤‡ä»½ç­–ç•¥
```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
tar -czf backup_$DATE.tar.gz /path/to/admin
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- **é¡¹ç›®åœ°å€**ï¼š/Users/huhaitao/WeChatProjects/miniprogram-5
- **éƒ¨ç½²åŒ…**ï¼šadmin-deploy-20250807-131611.tar.gz
- **æ–‡æ¡£**ï¼šéƒ¨ç½²æŒ‡å—.md

### ç›¸å…³æ–‡ä»¶
- `deploy-admin.sh` - éƒ¨ç½²è„šæœ¬
- `create-deploy-package.sh` - æ‰“åŒ…è„šæœ¬
- `admin/` - æºä»£ç ç›®å½•
- `admin/DEPLOY-README.md` - è¯¦ç»†éƒ¨ç½²è¯´æ˜

## ğŸ‰ éƒ¨ç½²å®Œæˆ

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

- **ä¸»ç®¡ç†ç³»ç»Ÿ**ï¼šhttp://your-domain.com
- **äº§å“ç¼–è¾‘æµ‹è¯•**ï¼šhttp://your-domain.com/test-product-edit.html
- **è¡Œç¨‹å®‰æ’æµ‹è¯•**ï¼šhttp://your-domain.com/test-itinerary.html

æ‰€æœ‰åŠŸèƒ½éƒ½å·²ä¸å°ç¨‹åºç‰ˆæœ¬å®Œå…¨åŒæ­¥ï¼Œæ”¯æŒå®Œæ•´çš„äº§å“ç®¡ç†åŠŸèƒ½ï¼ 